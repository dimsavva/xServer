<div>

		<div class="modal-header">
				<h5 class="modal-title">{{title}}</h5>
				<button type="button" class="close closemodal ml-auto" data-dismiss="modal" aria-label="Close" (click)="closeClicked()">
						<i class="lnr lnr-cross-circle"></i>
				</button>
		</div>
		<form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" [hidden]="loading">
				<div class="modal-body">
								<div class="form-group clearfix">
										<label for="">Sender</label>
										<input class="form-control" [(ngModel)]="selectedSenderAddress" [ngModelOptions]="{standalone: true}" [readonly]="true" />
								</div>
								<div class="float-right">Balance : <sc-balance data-toggle="tooltip" data-placement="top" title=""
												data-original-title="Set maximum amount" class="btn-link" [balance]="balance" [coinUnit]="coinUnit"></sc-balance>
								</div>
								<div class="form-group clearfix" data-toggle="tooltip" data-placement="right" title="The amount of {{ coinUnit }} to send with this transaction">
										<label for="amount">Amount</label>
										<input formControlName="amount" id="amount" type="number" step="0.01" class="form-control" placeholder="Amount" [class.is-invalid]="amount.invalid && (amount.dirty || amount.touched)">
										<div *ngIf="amount.errors" class="invalid-feedback">
												<p *ngIf="amount.errors.amountError">Amount must be less than your balance</p>
										</div>
								</div>
								<div class="form-group clearfix" data-toggle="tooltip" data-placement="right" title="The fee to send with this transaction ({{ coinUnit }}/bytes)">
										<label for="feeAmount">Fee</label>
										<input formControlName="feeAmount" id="feeAmount" type="number" step="0.01" class="form-control" placeholder="Fee" [class.is-invalid]="feeAmount.invalid && (feeAmount.dirty || feeAmount.touched)">
										<div *ngIf="feeAmount.errors" class="invalid-feedback">
												<p *ngIf="feeAmount.errors.feeError">Fee must be less than your balance</p>
										</div>
								</div>
								<div class="row">
										<div class="form-group col-6 clearfix" data-toggle="tooltip" data-placement="right" title="The gas price to use with this transaction ({{ coinUnit }}/gas)">
												<label for="gasPrice">Gas price</label>
												<input formControlName="gasPrice" id="gasPrice" type="number" class="form-control" placeholder="Gas Price" [class.is-invalid]="gasPrice.invalid && (gasPrice.dirty || gasPrice.touched)">
												<div *ngIf="gasPrice.errors" class="invalid-feedback">
														<p *ngIf="gasPrice.errors.gasPriceTooLowError">Gas price must be greater than {{ gasPriceMinimum }}</p>
														<p *ngIf="gasPrice.errors.gasPriceTooHighError">Gas price must be less than {{ gasPriceMaximum }}</p>
												</div>
										</div>
										<div class="form-group col-6 clearfix" data-toggle="tooltip" data-placement="right" title="The gas limit to use with this transaction">
												<label for="gasLimit">Gas limit</label>
												<input formControlName="gasLimit" id="gasLimit" type="number" class="form-control" placeholder="Gas Limit" [class.is-invalid]="gasLimit.invalid && (gasLimit.dirty || gasLimit.touched)">
												<div *ngIf="gasLimit.errors" class="invalid-feedback">
														<p *ngIf="gasLimit.errors.gasCallLimitTooLowError">Gas call limit must be greater than {{ gasCallLimitMinimum }}</p>
														<p *ngIf="gasLimit.errors.gasCreateLimitTooLowError">Gas create limit must be greater than {{ gasCreateLimitMinimum }}</p>
														<p *ngIf="gasLimit.errors.gasLimitTooHighError">Gas limit must be less than {{ gasLimitMaximum }}</p>
												</div>
										</div>
								</div>
								<div class="row">
										<label class="col-12" for="">Parameters</label>
										<div style="display:block; margin-left:auto; margin-right:auto">
												<div class="row" formArrayName="parameters" *ngFor="let parameter of parameters.controls; let i = index;">
														<div class="mb-2 col-6" [formGroupName]="i">
																<select class="form-control form-control-sm" formControlName="type">
																		<option *ngFor="let parameterType of parameterTypes" [ngValue]="parameterType.type" >{{parameterType.value}}</option>
																</select>
														</div>
														<div class="mb-2 col-4" [formGroupName]="i">
																<input type="text" 
																				class="form-control form-control-sm"
																				formControlName="value"
																				id="Value"
																				placeholder="value"
																				value=""
																				required>
														</div>
														<div class="col-2 d-flex align-items-start justify-content-center">
																<button type="button" class="btn btn-outline-danger btn-sm" data-dismiss="modal"
																		data-toggle="tooltip" (click)="removeParameterClicked(i)" data-placement="right"
																		title="" data-original-title="Remove"><i class="lnr lnr-cross"></i></button>
														</div>
												</div>
										</div>
								</div>
								<div class="mt-2 mb-4 d-flex justify-content-end">
										<button type="button" class="btn btn-outline-secondary" (click)="addParameterClicked()"><i class="lnr lnr-plus-circle"></i>
												Add a parameter</button>
								</div>

								<div>
										<div *ngIf="mode === modeEnum.Call">
												<div class="form-group clearfix">
														<label for="methodName">Method Name</label>
														<input
																formControlName="methodName"
																id="methodName"
																type="text" 
																class="form-control"
																id=""
																placeholder="Method"
																data-toggle="tooltip" data-placement="right" title="The name of the method to invoke"
																[class.is-invalid]="methodName.invalid && (methodName.dirty || methodName.touched)">
												</div>
												<div class="form-group clearfix">
														<label for="contractAddress">Contract Address</label>
														<input type="text"
																	 formControlName="contractAddress"
																	 id="contractAddress"
																	 class="form-control"                                   
																	 placeholder="Contract Address"
																	 data-toggle="tooltip" data-placement="right" title="The address of the recipient contract"                                   
																	 [class.is-invalid]="contractAddress.invalid && (contractAddress.dirty || contractAddress.touched)">
												</div>
										</div>
										<div *ngIf="mode === modeEnum.Create">
												<div class="form-group clearfix" data-toggle="tooltip" data-placement="right" title="The bytecode of the contract to deploy">
														<label class="float-left" for="contractCode">Byte Code</label>
														<span class="float-right">
																<button type="button" class="btn btn-link d-inline-block ml-2 btn-sm" data-toggle="tooltip"
																		data-placement="right" title="" data-original-title="Copy to Clipboard">Copy</button>
														</span>
														<textarea class="form-control form-control-sm" id="contractCode" rows="5" formControlName="contractCode"
																[class.is-invalid]="contractCode.invalid && (contractCode.dirty || contractCode.touched)">{{contractCode}}</textarea>
														<div *ngIf="contractCode.errors" class="invalid-feedback">
																<p *ngIf="contractCode.errors.hasOddNumberOfCharacters">Must have an even number of characters</p>
																<p *ngIf="contractCode.errors.pattern">Must be valid hexadecimal characters</p>
														</div>
												</div>
										</div>
								</div>
								<div class="form-group clearfix">
										<label for="password">Wallet Password</label>
										<input formControlName="password" id="password" type="password" class="form-control" placeholder="Wallet Password" [class.is-invalid]="password.invalid && (password.dirty || password.touched)"
										data-toggle="tooltip" data-placement="right" title="The password for the current wallet">
										<div *ngIf="password.errors" class="invalid-feedback">
												<p *ngIf="password.errors.required">Please enter the password for wallet {{ walletName }}</p>
										</div>
								</div>
				</div>

				<div *ngIf="apiError" class="text-danger">{{ apiError }}</div>

				<div class="modal-footer">
						<button type="button" class="btn btn-outline-light" data-dismiss="modal" (click)="closeClicked()">Cancel</button>
						<button type="submit" data-toggle="modal" data-target="#" class="btn btn-purple btn-block" data-dismiss="modal"
								[disabled]="!transactionForm.valid">{{buttonText}}</button>
				</div>
		</form>
		<div [hidden]="!loading" [className]="isDarkTheme ? 'LoadingWhite' : 'Loading'" class="col-2 mx-auto unset-left" style="padding: 30px;">
			<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">
				<g>
					<path fill-rule="evenodd" clip-rule="evenodd" d="M51.141,120.777c3.377-0.05,6.127,0.968,8.248,4.312
									c5.566,8.779,11.626,17.243,17.497,25.828c0.551,0.805,1.151,1.578,1.863,2.551c0.694-0.871,1.217-1.467,1.674-2.109
									c14.805-20.81,29.138-43.092,44.973-63.129c1.757-2.224,3.866-2.968,6.486-2.968c9.042,0,9.986,0.042,17.563,0
									c2.167-0.012,3.966,0,8.271,0c-0.85,1.299-1.537,2.042-2.041,2.708c-20.522,27.136-41.143,54.984-61.753,82.053
									c-1.686,2.215-1.833,3.672-0.035,5.924c5.234,7.194,5.234,7.194,10.339,14.203c2,2.443,2.395,3.467,4.428,3.455
									c10.156-0.012,14.063,0.015,20.469-0.008c2.688,0.001,12.094,0.008,13.906-0.086c0,9.752,0.085,18.184,0.085,27.916
									c-2.464,0.055-2.019,0.039-2.993,0.035c-13.636-0.053-27.288-0.029-40.924-0.016c-2.183,0.002-3.518-0.789-4.692-2.594
									c-2.127-3.271-3.136-4.758-9.374-14.12c-7.078-10.449-7.41-11.038-8.184-12.073c-4.26,5.715-8.368,11.176-12.417,16.682
									c-2.512,3.414-4.868,6.947-7.438,10.316c-0.652,0.855-1.848,1.818-2.808,1.832c-8.969,0.141-19.037-0.053-28.6,0.011
									c0.824-1.213,6.489-8.348,7.25-9.376c11.05-14.18,17.452-22.703,28.64-36.773c1.627-2.047,1.509-3.383,0.149-5.49
									c-10.579-16.391-22.44-33.892-34.808-48.986" />

					<path fill-rule="evenodd" clip-rule="evenodd" d="M219.322,193.564c15.756,0,30.658,0,45.732,0c0,9.842,0,19.576,0,27.992
									c-28.875,0-60.064,0.08-89.292,0.08c0-6.09-0.016-12.115,0.002-18.125c0.003-0.918,0.993-1.91,1.712-2.699
									c13.194-14.482,28.836-28.982,41.95-43.539c6.426-7.133,12.601-14.524,16.116-23.658c2.178-5.659,2.335-11.463,0.323-17.181
									c-2.165-6.16-6.947-9.166-13.341-9.133c-14.792,0.039-30.11,0.02-45.166,0.008c-0.484,0-1.048,0.019-1.604,0.011
									c0-7.17,0-21.72,0-21.72c1.025-0.218,2.414-0.197,3.479-0.2c13.741-0.033,27.25,0,41.047,0c8.012,0,15.86,1.175,23.26,4.524
									c12.519,5.667,19.366,15.395,21.472,29.01c2.004,12.948-2.492,23.707-10.343,33.255c-10.709,13.023-21.922,25.633-32.915,38.422
									C221.112,191.359,220.499,192.133,219.322,193.564z" />

					<path fill-rule="evenodd" clip-rule="evenodd" d="M175.659,168.904c0.006,1.938-0.361,3.021-2.624,3.012
									c-14.148-0.061-24.605,0.013-38.754,0c-1.594,0.002-4.152-0.001-5.5,0c15.463-20.945,26.719-36.892,41.961-57.536
									c1.227-1.841,1.258-1.893,5.046-7.224" />
				</g>
			</svg>
		</div>
</div>
